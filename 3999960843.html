<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2016 v1" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><meta name="msapplication-config" content="none" /><link rel="icon" type="image/x-icon" href="../assets/ico/bruker.ico" /><link rel="stylesheet" href="../assets/css/base/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base/02-jquery-tree.css" /><link rel="stylesheet" href="../assets/css/base/03-bootstrap-schema.css" /><link rel="stylesheet" href="../assets/css/base/04-jquery.mcustomscrollbar.min.css" /><link rel="stylesheet" href="../assets/css/base/05-jquery.mmenu.oncanvas.css" /><link rel="stylesheet" href="../assets/css/base/06-jquery.mmenu.schema.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><title>mldcon</title></head><body id="3999960843" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="3999960843" class="" data-culture="en-US"><div class="off-canvas"><div id="off-canvas-menu" role="complementary"></div><div id="pushobj"><div class="scroll-container content-container" id="content-container"><div class="container" role="main"><ol class="breadcrumb hidden-xs"><li><a style="color:#3195CA;" href="index.html"></a></li><li><a style="color:#3195CA;" href="3278882699.html">Analysis Commands</a></li><li>mldcon</li></ol><h1 class="heading" style="color:black;">mldcon</h1><div class="metalist"></div><p><strong>NAME</strong></p><p><strong>mldcon</strong> – Mixed Gaussian/Lorentzian deconvolution using machine learning based algorithm (1D)</p><p><strong>DESCRIPTION</strong></p><p>The command <strong>mldcon</strong> deconvolves a 1D spectrum by fitting a mixed Lorentzian/Gaussian function to the peaks. The algorithm was developed to work on 1H 1D spectra, and it is based on a deep learning algorithm trained for peak detection. The algorithm requires a phase and baseline corrected 1D spectrum as input, and outputs a list of peaks that can be used to describe the spectrum. The algorithm works based on two deconvolution steps performed automatically: (i) initial peaks detection and peak parameters guess using deep learning, and (ii) accurate fit of peaks position, amplitude, width and line shape to match spectrum amplitudes.</p><p>The algorithm automatically optimizes the mixed Lorentzian/Gaussian ratio of each peak to obtain the best possible fit to the input data. The percentage of Gaussian contribution to the line shape is expressed by the lineshape parameter, and it can range from 0 (pure Lorentzian – line shape parameter equal to 0) to 100% (pure Gaussian – line shape parameter equal to 1). The ability to fit both Lorentzian and Gaussian line shapes makes the algorithm suitable to deconvolve spectra that can be described by either line shape or by a mix of the two.</p><p>The algorithm stores the deconvolution results as mldcon.csv file in the corresponding PROCNO directory. For each detected peak, the mldcon.csv file reports peak frequency in ppm, intensity in absolute values, full width at half maximum in Hz, line shape as ratio of Gaussian contribution to the total line shape, and absolute area. The peak positions and intensities are also stored as peaklist.xml file, to allow visualization of the predicted peak positions in the spectrum and for the Plot Editor. </p><p>After successful completion of the deconvolution algorithm, <strong>mldcon</strong> displays by default the result in a deconvolution visualization window. An example of the deconvolution visualization window is shown in the figure below. This window displays the input spectrum (in blue), the detected peaks (in grey), their sum (reconstructed spectrum, in red), and the difference between the input and the reconstructed spectrum (residuals, in black).</p><div class="textmodule" id="4000069259"><div class="metalist"></div><figure class="img_80"><img src="../Images/png/3999964171__Web.png" width="312" height="218" /></figure><div class="image"></div><div class="linklist"></div></div><p>Use the command <strong>mldcon -d</strong> (or <strong>mldcon -display</strong>) to display the visualization window without running the deconvolution algorithm. This option builds a deconvolution visualization window using the results stored in the mldcon.csv file (i.e., it shows the results of a previous mldcon run). Use the -s (or -silent) option to run the deconvolution command silently, without automatically opening the deconvolution visualization window (for more details, see USAGE below).</p><p>The reconstructed spectrum is not saved by default. It is possible to store the reconstructed spectrum using the command <strong>mldcon -sr</strong> (or <strong>-store</strong>), which would run the deconvolution and save the reconstructed spectrum in the PROCNO 999 directory of the corresponding EXPNO. Use the additional -procno and -o options to respectively change the PROCNO directory and force overwriting (for more details, see USAGE below). </p><p>Note that the algorithm offers a range of options that can be used to tailor your results and personalize your workflow. Examples are: deconvolve only a given part of the spectrum, run the deconvolution using an existing user-defined guess instead of the deep learning prediction (starts from a peaklist.xml or mldcon.csv file), increase the number of fit iterations to have a more accurate fitting, and more. Many of these options can also be combined together. An overview of all the options is given in the USAGE paragraph below.</p><p> </p><p><strong>USAGE</strong></p><p>The following options run the full deconvolution algorithm (deep learning initial guess + accurate fitting). A slash separates matching options. </p><p><strong>mldcon</strong> - Run the deconvolution and display the results in a deconvolution visualization window.</p><p><strong>mldcon -s/-silent</strong> - Run the deconvolution silently (without opening the deconvolution visualization window).</p><p><strong>mldcon -r=&lt;value1&gt;,&lt;value2&gt;/-range=&lt;value1&gt;,&lt;value2&gt;</strong> – Run the deconvolution in the region of the spectrum between &lt;value1&gt; and &lt;value2&gt; ppm. The <strong>-r/-range</strong> option cannot be combined with the <strong>-intrng </strong>and<strong> -e/-exclude</strong> options. For optimal results, include the full signal regions in the range by extending the range to hit the baseline on both sides (region with only noise).</p><p><strong>mldcon -e=&lt;value1&gt;,&lt;value2&gt;/-exclude=&lt;value1&gt;,&lt;value2&gt;</strong> – Run the deconvolution for the full spectrum leaving out the region between &lt;value1&gt; and &lt;value2&gt; ppm. The <strong>-e/-exclude</strong> option cannot be combined with the <strong>-r/-range</strong> and <strong>-intrng</strong> options.</p><p><strong>mldcon -intrng</strong> – Run the deconvolution in the integral regions. The <strong>- intrng</strong> option cannot be combined with the <strong>-r/-range</strong> and <strong>-e/-exclude</strong> options. For optimal results, include the full signal regions in the integral regions by extending the edges to hit the baseline on both sides (region with only noise).</p><p><strong>mldcon -sr/-store</strong> – Run the deconvolution, display the results in a deconvolution visualization window, store the reconstructed spectrum in PROCNO 999.</p><p><strong>mldcon -sr/-store -procno=&lt;value&gt;</strong> – Run the deconvolution, display the results in a deconvolution visualization window, store the reconstructed spectrum as PROCNO &lt;value&gt;. &lt;value&gt; must be a positive integer higher than 0.</p><p><strong>mldcon -sr/-store -o</strong> – Run the deconvolution, display the results in a deconvolution visualization window, store the reconstructed spectrum in PROCNO 999 and force overwriting if the PROCNO directory already exists. The <strong>-o</strong> option can also be combined with the <strong>-procno</strong>.</p><p><strong>mldcon -sino=&lt;value&gt;</strong> – Run the deconvolution, filter out peaks smaller than &lt;value&gt; times the noise level, display the results in a deconvolution visualization window. The default <strong>-sino</strong> value is 5. Note that the noise level is roughly estimated by the algorithm, and it might slightly deviate from the correct value. Note also that the <strong>-sino</strong> parameter cannot be used in combination with <strong>-csv</strong> and <strong>-pp</strong> in order to preserve the number of user defined peaks.</p><p><strong>mldcon -fit=&lt;value&gt;</strong> – Run the deconvolution using &lt;value&gt; times the number of fitting iterations of the accurate fitting, display the results. Use this option to get a more accurate fitting if the default result has a large residual. &lt;value&gt; must be a positive integer higher than 0. (example: <strong>mldcon -fit=2</strong> will double the number of fitting iterations)</p><p><strong>mldcon -f</strong> – Force the deconvolution algorithm to run on spectra that are not 1H spectra. </p><p>The following options run only the accurate fitting part of the deconvolution algorithm and allow users to define the initial peak parameters guess. A slash separates matching options. </p><p><strong>mldcon -pp</strong> – Read the content of the peaklist.xml file (created e.g. using the manual peak picking window), run the deconvolution using peaks at the positions defined in the peaklist.xml file as initial guess, display the results. Note that if the peak positions are changed during the fitting, the peaklist.xml file will be updated. </p><p><strong>mldcon -csv</strong> – Read the content of the mldcon.csv file, run the accurate fitting using the peaks defined in mldcon.csv as initial guess, display the results. Note that if the peak parameters are changed during the fitting the mldcon.csv file will be updated.</p><p><strong>mldcon -pp/-csv -tolppm=&lt;value&gt;</strong> – Run the deconvolution restricting the chemical shift adjustment made by the accurate fitting to &lt;value&gt; ppm from the initial guess, display the results. This option can be combined with both <strong>-csv</strong> and <strong>-pp</strong>. (example <strong>mldcon -pp -tolppm=0.01</strong>: deviates peak positions max 0.01ppm from the input guess)</p><p><strong>mldcon -csv -tolamp=&lt;value&gt;</strong> – Run the deconvolution restricting the amplitudes adjustment made by the accurate fitting to &lt;value&gt;% of the initial guess, display the results. This option can be combined with <strong>-csv</strong> only. (example <strong>mldcon -csv -tolamp=10</strong>: deviates peak amplitudes max 10% from the input guess)</p><p><strong>mldcon -csv -tolwidth=&lt;value&gt;</strong> – Run the deconvolution restricting the line width adjustment made by the accurate fitting to &lt;value&gt;% of the initial guess, display the results. This option can be combined with <strong>-csv</strong> only. (example <strong>mldcon -csv -tolwidth=10</strong>: deviates peak line widths max 10% from the input guess)</p><p><strong>mldcon -csv -tolls=&lt;value&gt;</strong> – Run the deconvolution restricting the lineshape parameter adjustment made by the accurate fitting to &lt;value&gt; units from the initial guess, display the results. This option can be combined with <strong>-csv</strong> only. (example <strong>mldcon -csv -tolls=0.1</strong>: deviates peak lineshape parameters max 0.1 units from the input guess)</p><p>The following options do not run the deconvolution algorithm. A slash separates equivalent options.</p><p><strong>mldcon -d/-display</strong> – Open a deconvolution visualization window with the results stored in the mldcon.csv file. </p><p><strong>mldcon -srcsv/-storecsv</strong> – Reconstruct the spectrum from the peak list in the mldcon.csv file, and store it as PROCNO 999. This option can be combined with the <strong>-procno</strong> and <strong>-o</strong> options to respectively change the PROCNO directory and force overwriting.</p><p>Note that most of the options can be used together to combine their results.</p><p> </p><p><strong>INPUT FILES</strong></p><p><em>&lt;dir&gt;/&lt;name&gt;/&lt;expno&gt;/pdata/&lt;procno&gt;/</em></p><p>1r, 1i - processed 1D data (frequency domain)</p><p><em>mldcon.csv</em> (input of <strong>mldcon -csv</strong> and <strong>mldcon -srcsv/storecsv</strong>)</p><p><em>peaklist.xml</em> (input of <strong>mldcon -pp</strong>)</p><p> </p><p><strong>OUTPUT FILES</strong></p><p><em>&lt;dir &gt;/&lt;name&gt;/&lt;expno&gt;/pdata/&lt;procno&gt;/</em></p><p><em>mldcon.csv</em> – peak list created by <strong>mldcon</strong></p><p><em>peaklist.xml</em> – peak list for the plot editor</p><p><em>auditp.txt</em> – processing audit trail</p><p><em>1r</em> – real processed 1D data of the reconstructed spectrum (output of <strong>mldcon -sr</strong>/<strong>-store</strong> and <strong>mldcon -srcsv/storecsv</strong>)</p><p> </p><p><strong>USAGE IN AU PROGRAMS</strong></p><p>MLDCON(option_string)</p><p>All the options in the USAGE paragraph can be used in automation and passed as option_string (const char*). Example MLDCON(“-range=4,5 -fit=2”). Note that the function always requires an option string, so the default <strong>mldcon</strong> command can be used in AU programs using MLDCON(“”).</p><p> </p><p><strong>SEE ALSO</strong></p><p><a style="color:#3195CA;" href="3278914443.html">dcon2d, dcon</a>; <a style="color:#3195CA;" href="3278903819.html">gdcon, ldcon, mdcon, ppp, dconpl, dcon</a></p><div class="image"></div></div><div class="container"><footer><p class="text-muted">@ Bruker Corporation 2023</p></footer></div></div><div class="schema-navbar" id="navbar" role="navigation"><button class="schema-navbar-toggle visible-sm visible-xs" id="sidebar-toggle"><span class="schema-glyph schema-glyph-menu"></span></button><a class="schema-navbar-brand" href="index.html"><img class="schema-navbar-logo" src="../assets/img/logo_white.svg" /></a><button class="btn btn-default dropdown-toggle schema-navbar-toggle mobile-hidden-xs mobile-hidden-sm" style="margin-top:20px;" id="language-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="schema-glyph schema-glyph-more_vert" style="top:0;"></span></button><ul class="dropdown-menu" id="language-dropdown"><li class="dropdown-header hidden-md hidden-lg"></li><li class="hidden-md hidden-lg"><a href="index.html">Home</a></li><li class="dropdown-header">Language</li><li class="langMenuItem checked" data-value="en-US"><a href="../en-US/3999960843.html">us-english</a></li></ul><div id="navbar-search"><form class="schema-navbar-search hidden-xs pull-right" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div><ul class="navbar-structure-pages hidden-sm hidden-xs "><li class="schema-home-text"><a href="index.html">Home</a></li></ul><button class="navbar-toggle schema-navbar-toggle visible-xs" data-toggle="collapse" data-target="#search-collapse"><span class="schema-glyph schema-glyph-search"></span></button><form class="collapse hidden-sm hidden-md hidden-lg" id="search-collapse" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div></div></div><script type="text/javascript" charset="utf-8" src="js/treedata.json"></script><script src="../assets/js/00-jquery.min.js"></script><script src="../assets/js/01-bootstrap.min.js"></script><script src="../assets/js/02-modernizr.custom.js"></script><script src="../assets/js/03-jquery-tree.js"></script><script src="../assets/js/04-jquery.mmenu.oncanvas.min.js"></script><script src="../assets/js/05-jquery.mcustomscrollbar.min.js"></script><script src="../assets/js/06-jquery-scrollbars.min.js"></script><script src="../assets/js/18-schema-common-core.min.js"></script><script src="../assets/js/19-schema-common-search.js"></script><script src="../assets/js/20-bootstrap-schema.js"></script></body></html>