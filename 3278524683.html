<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2016 v1" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><meta name="msapplication-config" content="none" /><link rel="icon" type="image/x-icon" href="../assets/ico/bruker.ico" /><link rel="stylesheet" href="../assets/css/base/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base/02-jquery-tree.css" /><link rel="stylesheet" href="../assets/css/base/03-bootstrap-schema.css" /><link rel="stylesheet" href="../assets/css/base/04-jquery.mcustomscrollbar.min.css" /><link rel="stylesheet" href="../assets/css/base/05-jquery.mmenu.oncanvas.css" /><link rel="stylesheet" href="../assets/css/base/06-jquery.mmenu.schema.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><title>trf, trfp</title></head><body id="3278524683" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="3278524683" class="" data-culture="en-US"><div class="off-canvas"><div id="off-canvas-menu" role="complementary"></div><div id="pushobj"><div class="scroll-container content-container" id="content-container"><div class="container" role="main"><ol class="breadcrumb hidden-xs"><li><a style="color:#3195CA;" href="index.html"></a></li><li><a style="color:#3195CA;" href="3278283019.html">1D Processing Commands</a></li><li>trf, trfp</li></ol><h1 class="heading" style="color:black;">trf, trfp</h1><div class="metalist"></div><h2 class="subheading">NAME</h2><p>trf - <span class=".index-entry" id="ID0EAPMO"></span>User<span class=".index-entry" id="ID0EEPMO"></span> defined processing of raw data (1D)</p><p>trfp - User <span class=".index-entry" id="ID0EKPMO"></span>defined processing of processed data (1D)</p><h2 class="subheading">DESCRIPTION</h2><p>The command <strong>trf</strong> processes the raw data performing the following steps: </p><ul class="list"><li value="1"><span class=".index-entry" id="ID0E1PMO"></span>baseline correction according to BC_mod</li><li value="2"><span class=".index-entry" id="ID0EBQMO"></span>linear prediction according to ME_mod</li><li value="3"><span class=".index-entry" id="ID0EIQMO"></span>window multiplication according to WDW</li><li value="4"><span class=".index-entry" id="ID0EPQMO"></span>Fourier transform according to FT_mod</li><li value="5"><span class=".index-entry" id="ID0EWQMO"></span>phase correction according to PH_mod</li></ul><p><strong>trf</strong> offers the following features: </p><ul class="list"><li value="1">when all parameters mentioned above are set to <em>no</em>, the raw data (file <em>fid</em>) are simply stored as processed data (files <em>1r</em>, <em>1i</em>). The even points are stored as real data (file <em>1r</em>) and the odd points as <span class=".index-entry" id="ID0EPRMO"></span>imaginary data (file <em>1i</em>). The size of these processed data and the number of input FID points are determined by the parameters SI and TDeff, as described for the command <strong>ft</strong>. For example, if 0 &lt; TDeff &lt; TD, the processed data are truncated. This allows to create an FID with a smaller size than the original one (see also the command <strong><span class=".index-entry" id="ID0EYRMO"></span>genfid </strong><a style="color:#3195CA;" href="3278409483.html">genfid</a>).</li><li value="2"><strong>trf</strong> evaluates BC_mod for the <span class=".index-entry" id="ID0EFSMO"></span>baseline correction mode (e.g. quad, qpol or qfil) and <span class=".index-entry" id="ID0EJSMO"></span>detection mode (e.g. single or quad, spol or qpol, sfil or qfil). Note that the command <strong><span class=".index-entry" id="ID0ENSMO"></span>bc</strong> evaluates the acquisition status parameter AQ_mod for the detection mode and ignores the BC_mod detection mode (see parameter BC_mod).</li><li value="3"><strong>trf</strong> evaluates WDW for the <span class=".index-entry" id="ID0EWSMO"></span>window multiplication mode (<em>em</em>, <em>gm</em>, <em>sine</em>, <em>qsine</em>, <em>trap</em>, <em>user</em>, <em>sinc</em>, <em>qsinc</em>, <em>traf</em> or <em>trafs</em>). This allows to vary the window multiplication by varying the value of WDW rather than the window multiplication command. This can be useful in AU programs.</li><li value="4">the <span class=".index-entry" id="ID0ESTMO"></span>Fourier transform is performed according to FT_mod. Normally, the Fourier transform is done with the command <strong>ft</strong> which determines the Fourier transform mode from acquisition status parameter AQ_mod. However, for some datasets, no value of AQ_mod translates to a correct <span class=".index-entry" id="ID0EYTMO"></span>Fourier transform mode. An example of this is when you read a column (with <strong><span class=".index-entry" id="ID0E3TMO"></span>rsc</strong>) from a 2D dataset which was measured with FnMODE (or MC2) = States-TPPI and Fourier transformed in the F2 direction only. The resulting FID can only be Fourier transformed correctly with <strong>trf</strong>. The parameter FT_mod is automatically set to the correct value by the <strong>rsc</strong> command. <strong>trf</strong> can also be used manipulate the <span class=".index-entry" id="ID0EGUMO"></span><span class=".index-entry" id="ID0EJUMO"></span>acquisition mode of raw data by Fourier transforming the data with one FT_mod and <span class=".index-entry" id="ID0ENUMO"></span>inverse Fourier transforming them with a different FT_mod. From the resulting data you could create pseudo-raw data (using <strong>genfid</strong>) with a different <span class=".index-entry" id="ID0ETUMO"></span>acquisition mode than the original raw data. Finally, <strong>trf</strong> allows to process the data without Fourier transform (FT_mod = no). The following table shows a list of FT_mod values:</li></ul><table class="table tabletype-framed table-scaled"><colgroup><col style="width: 1.98cm;"></col><col style="width: 6.00cm;"></col></colgroup><tbody><tr><td><p class="text-left">FT_mod</p>
</td><td><p class="text-left"><span class=".index-entry" id="ID0ELVMO"></span>Fourier transform mode</p>
</td></tr><tr><td><p class="text-left">no</p>
</td><td><p class="text-left">no Fourier transform</p>
</td></tr><tr><td><p class="text-left">fsr</p>
</td><td><p class="text-left">forward, single channel, real</p>
</td></tr><tr><td><p class="text-left">fqr</p>
</td><td><p class="text-left">forward, <span class=".index-entry" id="ID0EQWMO"></span>quadrature, real</p>
</td></tr><tr><td><p class="text-left">fsc</p>
</td><td><p class="text-left">forward, single channel, complex</p>
</td></tr><tr><td><p class="text-left">fqc</p>
</td><td><p class="text-left">forward, quadrature, complex</p>
</td></tr><tr><td><p class="text-left">isr</p>
</td><td><p class="text-left">inverse, single channel, real</p>
</td></tr><tr><td><p class="text-left">iqr</p>
</td><td><p class="text-left">inverse, quadrature, real</p>
</td></tr><tr><td><p class="text-left">isc</p>
</td><td><p class="text-left">inverse, single channel, complex</p>
</td></tr><tr><td><p class="text-left">iqc</p>
</td><td><p class="text-left">inverse, quadrature, complex</p>
</td></tr></tbody></table><p> </p><p>The command <strong>trfp</strong> works like <strong>trf</strong>, except that it always works on processed data. If no processed data exist, <strong>trfp</strong> stops with an error message. </p><p><strong>trfp</strong> can be used to perform multiple additive <span class=".index-entry" id="ID0EHZMO"></span>baseline corrections, to remove multiple frequency baseline distortions. This cannot be done with <strong>bc</strong> or <strong>trf</strong> because these commands always work on the raw data, i.e. they are not additive. Note that the <span class=".index-entry" id="ID0EPZMO"></span>window multiplication commands (e.g. <strong><span class=".index-entry" id="ID0EUZMO"></span>em</strong>, <strong><span class=".index-entry" id="ID0EZZMO"></span>gm</strong>, <strong><span class=".index-entry" id="ID0E5ZMO"></span>sine</strong> etc.) are additive. The same counts for <span class=".index-entry" id="ID0EC1MO"></span>linear prediction (part of <strong>ft</strong>) and <span class=".index-entry" id="ID0EI1MO"></span>phase correction (<strong>pk</strong>). </p><p><strong>trf</strong> can be used to do a combination of forward and backward prediction. Just run <strong>trf</strong> with ME_mod = LPfc and then <strong>trfp</strong> (or <strong>ft</strong>) with ME_mod = LPbc.</p><p>When executed on a 2D or 3D dataset, <strong>trf</strong> takes up to four arguments: </p><p><strong>trf &lt;row&gt; &lt;procno&gt; n y</strong> </p><p>process the specified row and store it under the specified<em> procno</em>. The last two arguments are optional: <strong>n</strong> prevents changing the display to the output 1D data, <strong>y</strong> causes a possibly existing data to be overwritten without warning.</p><p>When executed on a dataset with 2D or 3D raw data but 1D processed data (usually a result of rsr, rsc or a previous 1D processing command on that 2D or 3D data), <strong>trf</strong> takes one argument <strong>trf &lt;row&gt;</strong> process the specified row and store it under the current<em> procno</em>.</p><p><strong>trf same</strong> process the same row as the previous processing command and store it under the current<em> procno</em>. The <strong>same</strong> option is automatically used by the AU program macro TRF. When used on a regular 1D dataset (i.e. with 1D raw data), it has no effect.</p><h2 class="subheading">INPUT PARAMETERS </h2><p>Set by the user with <strong>edp</strong> or by typing <strong>si</strong>, <strong>tdeff</strong> etc.: </p><p>SI - size of the processed data</p><p>TDeff - number of raw data points to be used for processing</p><p>FCOR - first (FID) data point multiplication factor (0.0-2.0, default 0.5)</p><p>BC_mod - FID baseline correction mode</p><p>  BCFW - filter width for BC_mod = sfil or qfil</p><p>  COROFFS - correction offset for BC_mod = spol/qpol or sfil/qfil</p><p>ME_mod - FID linear prediction mode</p><p>  NCOEF - number of linear prediction coefficients</p><p>  LPBIN - number of points for linear prediction</p><p>  TDoff - number of raw data points predicted for ME_mod = LPb*</p><p>WDW - FID window multiplication mode</p><p>  LB - Lorentzian broadening factor for WDW = em or gm</p><p>  GB - Gaussian broadening factor for WDW = gm, sinc or qsinc</p><p>  SSB - Sine bell shift for WDW = sine, qsine, sinc or qsinc</p><p>  TM1, TM2 - limits of the trapezoidal window for WDW = trap</p><p>FT_mod - Fourier transform mode</p><p>  REVERSE - flag indicating to reverse the spectrum</p><p>  PKNL - group delay compensation (Avance) or filter correction (A*X)</p><p>  STSR - strip start: first output point of strip transform</p><p>  STSI - strip size: number of output points of strip transform</p><p>PH_mod - phase correction mode</p><p>  PHC0 - zero order phase correction value for PH_mod = pk</p><p>  PHC1 - first order phase correction value for PH_mod = pk</p><p>Set by the acquisition, can be viewed with <strong>dpa</strong> or by typing <strong>s</strong> <strong>td</strong> :</p><p>TD - time domain; number of raw data points</p><h2 class="subheading">OUTPUT PARAMETERS</h2><p>Can be viewed with <strong>dpp</strong> or by typing <strong>s</strong> <strong>tdeff</strong> etc.: </p><p>TDeff - number of raw data points that were used for processing</p><p>STSR - strip start: first output point of strip transform</p><p>STSI - strip size: number of output points of strip transform</p><p>NC_proc - intensity scaling factor</p><p>YMAX_p - maximum intensity of the processed data</p><p>YMIN_p - minimum intensity of the processed data</p><p>BYTORDP - data storage order</p><h2 class="subheading">INPUT FILES</h2><p><em>&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/</em></p><p><em>fid</em> - raw data (input of <strong>trf</strong>)</p><p><em>acqus</em> - F2 acquisition status parameters</p><p><em>&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/pdata/&lt;procno&gt;/</em></p><p><em>1r</em>, <em>1i</em> - processed 1D data (input of <strong>trfp</strong>)</p><p><em>proc</em> - processing parameters</p><h2 class="subheading">OUTPUT FILES</h2><p><em>&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/pdata/&lt;procno&gt;/</em></p><p><em>1r</em>, <em>1i</em> - processed 1D data</p><p><em>procs</em> - processing status parameters</p><p><em>auditp.txt</em> - processing audit trail</p><h2 class="subheading">USAGE IN AU PROGRAMS</h2><p>TRF</p><p>TRFP</p><h2 class="subheading">SEE ALSO</h2><p><a style="color:#3195CA;" href="3278350603.html">bc</a>, <a style="color:#3195CA;" href="3278376971.html">em, gm</a>, <a style="color:#3195CA;" href="3278461195.html">pk</a>, <a style="color:#3195CA;" href="3278399627.html">ft, ftf</a></p></div><div class="container"><footer><p class="text-muted">@ Bruker Corporation 2023</p></footer></div></div><div class="schema-navbar" id="navbar" role="navigation"><button class="schema-navbar-toggle visible-sm visible-xs" id="sidebar-toggle"><span class="schema-glyph schema-glyph-menu"></span></button><a class="schema-navbar-brand" href="index.html"><img class="schema-navbar-logo" src="../assets/img/logo_white.svg" /></a><button class="btn btn-default dropdown-toggle schema-navbar-toggle mobile-hidden-xs mobile-hidden-sm" style="margin-top:20px;" id="language-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="schema-glyph schema-glyph-more_vert" style="top:0;"></span></button><ul class="dropdown-menu" id="language-dropdown"><li class="dropdown-header hidden-md hidden-lg"></li><li class="hidden-md hidden-lg"><a href="index.html">Home</a></li><li class="dropdown-header">Language</li><li class="langMenuItem checked" data-value="en-US"><a href="../en-US/3278524683.html">us-english</a></li></ul><div id="navbar-search"><form class="schema-navbar-search hidden-xs pull-right" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div><ul class="navbar-structure-pages hidden-sm hidden-xs "><li class="schema-home-text"><a href="index.html">Home</a></li></ul><button class="navbar-toggle schema-navbar-toggle visible-xs" data-toggle="collapse" data-target="#search-collapse"><span class="schema-glyph schema-glyph-search"></span></button><form class="collapse hidden-sm hidden-md hidden-lg" id="search-collapse" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div></div></div><script type="text/javascript" charset="utf-8" src="js/treedata.json"></script><script src="../assets/js/00-jquery.min.js"></script><script src="../assets/js/01-bootstrap.min.js"></script><script src="../assets/js/02-modernizr.custom.js"></script><script src="../assets/js/03-jquery-tree.js"></script><script src="../assets/js/04-jquery.mmenu.oncanvas.min.js"></script><script src="../assets/js/05-jquery.mcustomscrollbar.min.js"></script><script src="../assets/js/06-jquery-scrollbars.min.js"></script><script src="../assets/js/18-schema-common-core.min.js"></script><script src="../assets/js/19-schema-common-search.js"></script><script src="../assets/js/20-bootstrap-schema.js"></script></body></html>