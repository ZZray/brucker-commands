<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2016 v1" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><meta name="msapplication-config" content="none" /><link rel="icon" type="image/x-icon" href="../assets/ico/bruker.ico" /><link rel="stylesheet" href="../assets/css/base/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base/02-jquery-tree.css" /><link rel="stylesheet" href="../assets/css/base/03-bootstrap-schema.css" /><link rel="stylesheet" href="../assets/css/base/04-jquery.mcustomscrollbar.min.css" /><link rel="stylesheet" href="../assets/css/base/05-jquery.mmenu.oncanvas.css" /><link rel="stylesheet" href="../assets/css/base/06-jquery.mmenu.schema.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><title>popt</title></head><body id="825136651" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="825136651" class="" data-culture="en-US"><div class="off-canvas"><div id="off-canvas-menu" role="complementary"></div><div id="pushobj"><div class="scroll-container content-container" id="content-container"><div class="container" role="main"><ol class="breadcrumb hidden-xs"><li><a style="color:#3195CA;" href="index.html"></a></li><li><a style="color:#3195CA;" href="825042315.html">Acquisition Commands</a></li><li>popt</li></ol><h1 class="heading" style="color:black;">popt</h1><div class="metalist"></div><h2 class="subheading">NAME</h2><p><strong>popt</strong> - <span class=".index-entry" id="ID0EYKKM"></span>Open the <span class=".index-entry" id="ID0E2KKM"></span>parameter <span class=".index-entry" id="ID0E6KKM"></span>optimization window.</p><h2 class="subheading">DESCRIPTION</h2><p>The command <strong>popt</strong> allows you to optimize <span class=".index-entry" id="ID0ELLKM"></span>acquisition parameters like pulses and delays (see the next figure).</p><figure class="img_fixed_column"><img src="../Images/png/2513864331__en-US__Web.png" width="1745" height="849" /><figcaption>popt</figcaption></figure><p>Before you start an optimization, you must run one acquisition with the acquisition parameters as they are (not optimized) and process the data. On the resulting spectrum, you must define the spectral range (a peak or group of peaks) to be used for optimization. To do that, click-hold the left mouse button at one edge of the desired region and drag the cursor to the other edge. The TopSpin display will automatically be adjusted to show the selected region only. You must now store this region with a right-mouse click in the spectrum window and select <strong>Save Display Region to …</strong> or by entering <strong>dpl1</strong>.</p><p>The <strong>popt</strong> dialog box allows you to create an entry for each parameter you want to optimize. By default, it shows only one entry; more parameters can be added by clicking the button <strong>Add parameter</strong>. Furthermore the following fields are offered:</p><ul class="list"><li value="1"><strong>OPTIMIZE</strong> : Optimization of the parameters in the group.</li><ul class="list"><li value="1"><strong>Step by Step</strong></li><li class="list-indent-2">The parameters of a group are optimized one after the other. NEXP can be different for each parameter. The total number of experiments is the sum of the NEXP value of each parameter. The result of each parameter optimization is stored in a separate PROCNO. </li><li value="2"><strong>Simultaneous</strong> </li><li class="list-indent-2">The parameters of a group a optimized simultaneously. NEXP must be the same for each parameter and represents the total number of experiments. The result of the parameter optimization is stored in one PROCNO.</li><li value="3"><strong>Array</strong></li><li class="list-indent-2">The parameters of a group a optimized according to an N-dimensional array (N is the number of parameters in a group). NEXP can be different for each parameter. The total number of experiments is the product of the NEXP value of each parameter. The result of the parameter optimization is stored in one PROCNO.</li><li value="4"><strong>No Optimization</strong></li><li class="list-indent-2">The parameter is not optimized. </li></ul><li value="2"><strong>GROUP</strong>: group number. Optimization starts with the lowest group number.</li><li value="3"><strong>PARAMETER</strong>: The parameter to be optimized. If <strong>OPTIMIZE</strong> is set to <strong>No Optimization</strong>, the parameter will be stored as comment in the <span class=".index-entry" id="ID0EWNKM"></span>optimization setup.</li><li value="4"><strong>OPTIMUM</strong>: Optimization criterion (see below).</li><li value="5"><strong>STARTVAL</strong>: First value of the parameter.</li><li value="6"><strong>ENDVAL</strong>: Last value of the parameter.</li><li value="7"><strong>NEXP</strong>: Number of experiments.</li><li value="8"><strong>VARMOD</strong>: Parameter variation mode: linear or logarithmic.</li><li value="9"><strong>INC</strong>: Parameter increment value. Unused for VARMOD = log.</li></ul><p> </p><p>The optimization criterion OPTIMUM can take the following values:</p><ul class="list"><li value="1">POSMAX - the maximum value of a positive peak.</li><li value="2">NEGMAX - the maximum value of a negative peak.</li><li value="3">ZERO - zero intensity of a peak.</li><li value="4">MAGMAX - the maximum magnitude value of a peak.</li><li value="5">MAGMIN - the minimum magnitude value of a peak.</li></ul><p> </p><p>At the bottom of the dialog box you will find the following buttons:</p><ul class="list"><li value="1"><strong>Start optimize</strong> - start the optimization for all checked parameters.</li><li value="2"><strong>Skip current optimization</strong> - stop the optimization for the current parameter.</li><li value="3"><strong>Show protocol </strong>- show the optimization result. A dialog appears with a list of protocol files: </li><ul class="list"><li value="1"><em>popt.protocol</em> : the entire optimization result.</li><li value="2"><em>popt.protocol.999</em> : the optimization result in PROCNO 999.</li><li value="3"><em>popt.protocol.998</em>: the optimization result in PROCNO 998.</li><li value="4">etc.</li></ul><li value="4"><strong>Add parameter </strong>- add a parameter entry.</li><li value="5"><strong>Restore</strong> - restore the last saved optimization setup.</li><li value="6"><strong>Save </strong>- save the current optimization setup to current dataset EXPNO.</li><li value="7"><strong>Read array file </strong>- read optimization setup.</li><li value="8"><strong>Save array file as..</strong> - save current optimization setup for general usage.</li><li value="9"><strong>Stop optimization</strong> - stop the optimization for all checked parameters.</li><li value="10"><strong>Delete parameter</strong> - delete the selected parameter.</li><li value="11">Display Dataset – Display the current dataset</li><li value="12">Update ProcPars – Update Processing Parameters</li><li value="13"><strong>Help - </strong>open the <strong>popt</strong> help page.</li></ul><p> </p><p>Clicking the button <strong>Start optimize</strong> will start the optimization process.</p><div class="safety safety-type-note safety-severity-note"><div class="safety-header">NOTE</div><div class="safety-body"><div class="row"><div class="col-sm-2 safety-symbol"><img src="../safety/note_NoteIcon.png" /></div><div class="col-sm-10"><p class="safety-consequence">Note that it runs on the current dataset. For each parameter/group, a series of acquisitions will be performed. The result of this is a series of spectra (actually spectral regions) that are displayed in one screen and show the optimum parameter value. They are stored as one or more processed data files under the current dataset name and experiment number, but under different processing numbers. For the first parameter/group that is optimized this is PROCNO 999, for the second parameter/group PROCNO 998 etc. As such, you must start <strong>popt</strong> on a dataset with PROCNO &lt; 900. The result will also be stored in the so-called protocol file (see OUTPUT FILES) </p></div></div></div><div class="safety-footer"></div></div><p> </p><p><span class="emphasis-avanceneored">Please note that the popt command is especially useful for 90° pulse length calibration. </span></p><p><span class="emphasis-avanceneored">TO Do: Beispiel</span></p><p><span class="emphasis-avanceneored">But also for pulse power optimization or any other pulse (decoupling, indirect pulses etc.) popt can be a useful tool. </span></p><p> </p><p>At the top of the dialog box you will find the following check buttons:</p><ul class="list"><li value="1"><strong>Store as 2D data (ser file)</strong>.</li><li class="list-indent-1">If checked, the result of the optimization (a series of 1D spectra) will be stored as a 2D dataset in EXPNO 899. However, if the source dataset PROCNO is greater than 100, the EXPNO of the destination 2D data will be</li><li class="list-indent-1">PROCNO - 100. </li><li value="2"><strong>The AU program specified in AUNM will be executed</strong>.</li><li class="list-indent-1">If checked, the AU program defined by AUNM will be executed instead of the command <strong>zg</strong>. </li><li value="3"><strong>Perform automatic baseline correction (ABSF)</strong> </li><li class="list-indent-1">If checked, the output data will be baseline corrected with <strong>absf</strong>.</li><li class="list-safety"><div class="safety safety-type-note safety-severity-note"><div class="safety-header">NOTE</div><div class="safety-body"><div class="row"><div class="col-sm-2 safety-symbol"><img src="../safety/note_NoteIcon.png" /></div><div class="col-sm-10"><p class="safety-consequence">Note that this command corrects the selected region (determined by the processing parameters ABSF1 and ABSF2).</p></div></div></div><div class="safety-footer"></div></div></li><li value="4"><strong>Overwrite existing files (disable confirmation message)</strong>.</li><li class="list-indent-1">If checked, the output PROCNO, if it exists, will be overwritten without warning.</li><li value="5"><strong>Stop sample spinning at the end of optimization (mash)</strong></li><li value="6"><strong>Run optimization in background</strong> </li><li class="list-indent-1">If checked, the foreground dataset will remain the same during the optimization. If it is not checked, the <em><span class=".index-entry" id="ID0ETVKM"></span></em>TopSpin display will change to PROCNO 999 where the optimization result is displayed.</li><li value="7"><strong>No display of estimated running time</strong></li><li value="8"><strong>Calculate optimum after POPT has finished, but do not store in dataset</strong></li><li value="9"><strong>Correlate 2D Container with experiment </strong></li></ul><p>To the right of the above check buttons, the current values of the parameters WDW (window multiplication mode), PH_mod (phase correction mode) and FT_mod (Fourier Transform mode) are displayed.</p><p>If you want to rerun an optimization, you must first return to the starting PROCNO.</p><h2 class="subheading">INPUT FILES</h2><ul class="list"><li value="1">&lt;tshome&gt;/exp/stan/nmr/lists/popt/</li><ul class="list"><li value="1"><em>&lt;name&gt;</em> - parameter optimization setup for general usage (input of <strong>Read array file..</strong>)</li></ul><li value="2">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/</li><ul class="list"><li value="1"><em>acqu</em> - acquisition parameters</li><li value="2"><em>popt.array</em> - parameter optimization setup (input of <strong>Restore</strong>)</li><li value="3"><em>popt.protocol</em> - parameter optimization result (input of <strong>Show protocol</strong>)</li></ul><li value="3">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/pdata/&lt;procno&gt;/</li><ul class="list"><li value="1"><em>proc</em> - processing parameters</li></ul><li value="4">&lt;tshome&gt;/prog/au/bin/</li><ul class="list"><li value="1"><em>poptau</em> - AU program that runs the optimization (executable)</li><li value="2"><em>popthalt</em> - AU program that halts the current optimization (executable)</li></ul></ul><h2 class="subheading">OUTPUT FILES</h2><ul class="list"><li value="1">&lt;tshome&gt;/exp/stan/nmr/lists/popt/</li><ul class="list"><li value="1"><em>&lt;name&gt;</em> - parameter optimization setup for general usage (output of <strong>Save array file as..</strong>)</li></ul><li value="2">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/pdata/999</li><ul class="list"><li value="1"><em>1r</em> - processed data containing the optimization result of the first parameter/group</li></ul><li value="3">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/pdata/998</li><ul class="list"><li value="1"><em>1r</em> - processed data containing the optimization result of the 2<sup>nd </sup>parameter/group </li></ul><li value="4">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/&lt;expno&gt;/</li><ul class="list"><li value="1"><em>popt.array</em> - parameter optimization setup (output of <strong>Save</strong>)</li><li value="2"><em>popt.protocol</em> - parameter optimization result (output of <strong>Start optimize</strong>)</li></ul><li value="5">&lt;dir&gt;/data/&lt;user&gt;/nmr/&lt;name&gt;/899/</li><ul class="list"><li value="1"><em>ser</em> - 2D raw data containing the optimization result</li></ul></ul><h2 class="subheading">SEE ALSO</h2><p><a style="color:#3195CA;" href="825089291.html">gs</a>, <a style="color:#3195CA;" href="825212811.html">zg</a></p><div class="image"></div></div><div class="container"><footer><p class="text-muted">@ Bruker Corporation 2023</p></footer></div></div><div class="schema-navbar" id="navbar" role="navigation"><button class="schema-navbar-toggle visible-sm visible-xs" id="sidebar-toggle"><span class="schema-glyph schema-glyph-menu"></span></button><a class="schema-navbar-brand" href="index.html"><img class="schema-navbar-logo" src="../assets/img/logo_white.svg" /></a><button class="btn btn-default dropdown-toggle schema-navbar-toggle mobile-hidden-xs mobile-hidden-sm" style="margin-top:20px;" id="language-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="schema-glyph schema-glyph-more_vert" style="top:0;"></span></button><ul class="dropdown-menu" id="language-dropdown"><li class="dropdown-header hidden-md hidden-lg"></li><li class="hidden-md hidden-lg"><a href="index.html">Home</a></li><li class="dropdown-header">Language</li><li class="langMenuItem checked" data-value="en-US"><a href="../en-US/825136651.html">us-english</a></li></ul><div id="navbar-search"><form class="schema-navbar-search hidden-xs pull-right" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div><ul class="navbar-structure-pages hidden-sm hidden-xs "><li class="schema-home-text"><a href="index.html">Home</a></li></ul><button class="navbar-toggle schema-navbar-toggle visible-xs" data-toggle="collapse" data-target="#search-collapse"><span class="schema-glyph schema-glyph-search"></span></button><form class="collapse hidden-sm hidden-md hidden-lg" id="search-collapse" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div></div></div><script type="text/javascript" charset="utf-8" src="js/treedata.json"></script><script src="../assets/js/00-jquery.min.js"></script><script src="../assets/js/01-bootstrap.min.js"></script><script src="../assets/js/02-modernizr.custom.js"></script><script src="../assets/js/03-jquery-tree.js"></script><script src="../assets/js/04-jquery.mmenu.oncanvas.min.js"></script><script src="../assets/js/05-jquery.mcustomscrollbar.min.js"></script><script src="../assets/js/06-jquery-scrollbars.min.js"></script><script src="../assets/js/18-schema-common-core.min.js"></script><script src="../assets/js/19-schema-common-search.js"></script><script src="../assets/js/20-bootstrap-schema.js"></script></body></html>