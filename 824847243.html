<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml"><head xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms"><meta http-equiv="Content-Script-Type" content="text/javascript" /><meta http-equiv="Content-Style-Type" content="text/css" /><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge" /><meta name="generator" content="SCHEMA ST4, Bootstrap 2016 v1" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no" /><meta name="msapplication-config" content="none" /><link rel="icon" type="image/x-icon" href="../assets/ico/bruker.ico" /><link rel="stylesheet" href="../assets/css/base/01-bootstrap.min.css" /><link rel="stylesheet" href="../assets/css/base/02-jquery-tree.css" /><link rel="stylesheet" href="../assets/css/base/03-bootstrap-schema.css" /><link rel="stylesheet" href="../assets/css/base/04-jquery.mcustomscrollbar.min.css" /><link rel="stylesheet" href="../assets/css/base/05-jquery.mmenu.oncanvas.css" /><link rel="stylesheet" href="../assets/css/base/06-jquery.mmenu.schema.css" /><link rel="stylesheet" href="../assets/css/formats.css" /><title>tune</title></head><body id="824847243" lang="en-US" xmlns:forms="http://www.schema.de/2010/ST4/Layout/MarkupLanguage/Forms" data-node-id="824847243" class="" data-culture="en-US"><div class="off-canvas"><div id="off-canvas-menu" role="complementary"></div><div id="pushobj"><div class="scroll-container content-container" id="content-container"><div class="container" role="main"><ol class="breadcrumb hidden-xs"><li><a style="color:#3195CA;" href="index.html"></a></li><li><a style="color:#3195CA;" href="824811659.html">Shim Commands</a></li><li>tune</li></ol><h1 class="heading" style="color:black;">tune</h1><div class="metalist"></div><h2 class="subheading"></h2><h2 class="subheading">NAME</h2><p><strong>tune</strong> -<span class=".index-entry" id="ID0ETFHK"></span>Perform <span class=".index-entry" id="ID0EWFHK"></span>automatic shimming of the magnet</p><h2 class="subheading">SYNTAX</h2><p>tune [&lt;tunefile&gt; | .sx]</p><h2 class="subheading">DESCRIPTION</h2><p>The command <strong>tune</strong> shims the magnet in an <span class=".index-entry" id="ID0EHGHK"></span>automatic procedure according to a <span class=".index-entry" id="ID0ELGHK"></span>shim definition file. This file is called the <span class=".index-entry" id="ID0EPGHK"></span>tune file and can be set up with the command <strong><span class=".index-entry" id="ID0ETGHK"></span>edtune</strong>. The command <strong>tune</strong> takes one argument and can be used in one of the following ways:</p><p><strong>tune</strong></p><p>Displays a list of available tune files (see the next figure). </p><figure class="img_50"><img src="../Images/png/2513127307__en-US__Web.png" width="363" height="494" /><figcaption>Select one of the available tune files</figcaption></figure><p>When you select an entry and click the <strong>Execute</strong> button, the corresponding tune file is interpreted and auto shimming is performed accordingly.</p><p><strong>tune &lt;tunefile&gt;</strong></p><p>Perform auto shimming according to the specified tune file.</p><p><strong>tune</strong> <strong>.sx</strong></p><p>Perform auto shimming according to the tune file as it is specified for the current probe. This tune file can be setup from the <strong><span class=".index-entry" id="ID0EZHHK"></span>edprosol</strong> dialog box by clicking <strong>File</strong> | <strong>Edit Tunefile</strong>.</p><p>An example tune file is delivered with TopSpin. You can use this as it is or modify it to your needs and store it under a different name. The statements you can use in a tune file are listed below. </p><div class="safety safety-type-note safety-severity-note"><div class="safety-header">NOTE</div><div class="safety-body"><div class="row"><div class="col-sm-2 safety-symbol"><img src="../safety/note_NoteIcon.png" /></div><div class="col-sm-10"><p class="safety-consequence">Note that some of these statements are settings whereas others are commands.</p></div></div></div><div class="safety-footer"></div></div><h2 class="subheading">Settings in a tune file:</h2><ul class="list"><li value="1"><code>USE_FIDAREA</code></li><ul class="list"><li value="1">Flag indicating to use the area under the <span class=".index-entry" id="ID0E6IHK"></span>FID envelope as a criterion for field <span class=".index-entry" id="ID0EDJHK"></span>homogeneity.</li></ul><li value="2"><code>USE_LOCKLEVEL</code></li><ul class="list"><li value="1">Flag indicating to use the <span class=".index-entry" id="ID0ERJHK"></span>lock level as a criterion for field homogeneity.</li></ul><li value="3"><code>LOCKDWELL n</code></li><ul class="list"><li value="1">The number of measurements used for determining the current lock level. The measured values are averaged to suppress the effects of the noise on the lock level. Only used when USE_LOCKLEVEL is defined.</li></ul><li value="4"><code>MAXLOCK m</code></li><ul class="list"><li value="1">The maximum <span class=".index-entry" id="ID0EKKHK"></span>lock level. Can be used to keep the lock signal from moving out of the display during the shimming procedure. The lock level is displayed at the <em><span class=".index-entry" id="ID0EPKHK"></span></em>TopSpin status line while <strong>tune</strong> is running.</li></ul><li value="5"><code>DELAY n</code> </li><ul class="list"><li value="1">The time (in seconds) between adjusting a shim and reading the new lock level. In the example <span class=".index-entry" id="ID0EBLHK"></span>tune file, DELAY is set to one second which is usually enough for the lock level to settle.</li></ul><li value="6"><code>SET &lt;shim&gt; w c</code> </li><ul class="list"><li value="1">Set the maximum step size (width) and the convergence limit for the <code>SIMPLEX</code> command. These parameters can be set for each shim separately. An example is:</li><li value="2"><code>SET Z1 20 3</code></li><li class="list-indent-2"><code>TIMES n</code></li><li class="list-indent-2"><code>..</code></li><li class="list-indent-2"><code>END</code></li></ul></ul><p>Loop structure; all statements within the loop will be executed <code>n</code> times. Nested loops are possible to a depth of five.</p><h2 class="subheading">Commands in a Tune File</h2><ul class="list"><li value="1"><code>ROTATION ON WAIT</code> </li><ul class="list"><li value="1">Switches the <span class=".index-entry" id="ID0EWMHK"></span>sample <span class=".index-entry" id="ID0E1MHK"></span>rotation on, using the <span class=".index-entry" id="ID0E4MHK"></span>spin rate currently set on the <span class=".index-entry" id="ID0EANHK"></span>BSMS unit.</li></ul><li value="2"><code>ROTATION OFF WAIT</code> </li><ul class="list"><li value="1">Switches the sample rotation off.</li></ul></ul><div class="safety safety-type-note safety-severity-note"><div class="safety-header">NOTE</div><div class="safety-body"><div class="row"><div class="col-sm-2 safety-symbol"><img src="../safety/note_NoteIcon.png" /></div><div class="col-sm-10"><div class="safety-cause"></div><p class="safety-consequence">Please note that these two commands are useful when switching from on-axis shims (Z1, Z2 etc ...) to off-axis shims (X, Y, XY...) since the first set (Z shims) are typically shimmed with a rotating sample and the off-axis shims (X, Y,XY ...) are adjusted with a non-rotating sample.</p></div></div></div><div class="safety-footer"></div></div><p> </p><ul class="list"><li value="1"><code>RSH</code>, <code>RSH &lt;filename&gt;</code></li><ul class="list"><li value="1">Reads a <span class=".index-entry" id="ID0EQOHK"></span>shim file. If an argument is specified, RSH will read the corresponding shim file. If not, it will read the shim file with the name of the solvent defined by the acquisition parameter SOLVENT.</li></ul><li value="2"><code>Z s i</code>, <code>Z2 s i</code>, ..., <code>XY s i</code> </li><ul class="list"><li value="1">Optimizes single shims. These commands take two arguments: </li><li class="list-indent-2">s = step size; the <span class=".index-entry" id="ID0EGPHK"></span>shim increment used as long as the <span class=".index-entry" id="ID0EKPHK"></span>lock level increases </li><li class="list-indent-2">i = iterations; the maximum number of steps after passing the maximum </li></ul></ul><p> </p><p>A shim is first changed <strong>s</strong> units in one direction. If this increases the lock level, the shim is changed again<strong> s</strong> units in the same direction. This is repeated until a shim change decreases the lock level. Then the direction of change is reversed and the step size is reduced. This process is continued until one of the following criteria has been met:</p><ul class="list"><li value="1">The lock level has not changed significantly during the last step.</li><li value="2">The maximum number of iterations (i) has been performed.</li><li value="3">The step size has been reduced to one.</li></ul><p>Examples of <span class=".index-entry" id="ID0EKQHK"></span>shim commands are:</p><p><code>    Z 10 3</code></p><p><code>    Z2 10 3</code> </p><p><code>    Z3 10 3</code> </p><ul class="list"><li value="1"><code>SIMPLEX &lt;shim1 shim2 etc.&gt;</code> </li><ul class="list"><li value="1">Optimizes the specified shims according to the <span class=".index-entry" id="ID0EGRHK"></span>simplex algorithm which can be used for lock level and <span class=".index-entry" id="ID0EJRHK"></span>FID area <span class=".index-entry" id="ID0ENRHK"></span>shimming. SIMPLEX uses the step size and convergence limit defined by the SET statement (see above). The simplex algorithm is described in the <em>example</em> file (see INPUT FILES below).</li></ul><li value="2"><code>AUTOSHIM ON &lt;shim1=m</code>, <code>shim2=n</code>, ...<code>&gt;</code></li><ul class="list"><li value="1">Switches on the automatic shimming function on the <span class=".index-entry" id="ID0ECSHK"></span>shim unit after the <span class=".index-entry" id="ID0EGSHK"></span><strong>tune</strong> command has finished. This command allows you to adjust the shims continuously during the entire experiment. Only the shims that are specified as arguments to the <code>AUTOSHIM</code> <code>ON</code> command will be optimized. For each shim, you can specify the step size used for auto shimming. If you do not specify the step size, the default value of 5 is used. An example of this command is:</li></ul><li value="3"><code>AUTOSHIM ON Z1=2 Z2</code> </li><ul class="list"><li value="1">Since this command becomes effective after the <strong>tune</strong> command has finished, it can be specified anywhere in the tune file.</li></ul><li value="4"><code>AUTOSHIM OFF</code> </li><ul class="list"><li value="1">Switches off automatic shimming on the <span class=".index-entry" id="ID0EITHK"></span>shim unit. It makes sure that automatic shimming is switched off when it was switched on before, either from the last executed tune file or manually from the BSMS display. </li></ul><li class="list-safety"><div class="safety safety-type-note safety-severity-note"><div class="safety-header">NOTE</div><div class="safety-body"><div class="row"><div class="col-sm-2 safety-symbol"><img src="../safety/note_NoteIcon.png" /></div><div class="col-sm-10"><p class="safety-consequence">Note that it would not make sense to use AUTOSHIM ON and AUTOSHIM OFF within one tune file.</p></div></div></div><div class="safety-footer"></div></div></li><li value="5"><code>LOCKPHASE s i</code> </li><ul class="list"><li value="1">Optimize the <span class=".index-entry" id="ID0EFUHK"></span>lock <span class=".index-entry" id="ID0EJUHK"></span>phase. This command takes two arguments: </li><li class="list-indent-2"><code>  </code>s = step size </li><li class="list-indent-2"><code>  </code>i = iterations; the maximum number of steps</li><li value="2">As an alternative to the <span class=".index-entry" id="ID0EZUHK"></span>automatic shimming with <strong>tune</strong>, you can optimize the shims manually from the BSMS display. If the shims are far away from the optimum, you can read a standard shim set with the command <strong><span class=".index-entry" id="ID0EAVHK"></span>rsh</strong> and then do manual shimming.</li></ul></ul><p>An alternative to the simplex procedure in <strong>tune</strong> is the AU program <strong><span class=".index-entry" id="ID0EMVHK"></span>simplex</strong>.</p><h2 class="subheading">INPUT FILES</h2><ul class="list"><li value="1">&lt;tshome&gt;/exp/stan/nmr/lists/group/</li><ul class="list"><li value="1"><em>example</em> - tune file </li></ul><li value="2">&lt;tshome&gt;/conf/instr/&lt;instrum&gt;/prosol/&lt;probeID&gt;/</li><ul class="list"><li value="1"><em>tunefile</em> - tune file for the current probe (input for <strong>tune</strong> <strong>.sx</strong>)</li></ul></ul><h2 class="subheading">USAGE IN AU PROGRAMS</h2><ul class="list"><li value="1">TUNE(tunefile)</li><li value="2">TUNESX </li><li class="list-indent-1">Eexecutes the command <strong>tune</strong> <strong>.sx</strong> </li></ul><h2 class="subheading">SEE ALSO</h2><p><a style="color:#3195CA;" href="824825227.html">edtune</a>, <a style="color:#3195CA;" href="824835851.html">rsh, wsh, vish</a>, <a style="color:#3195CA;" href="825277835.html">delpar, delgp, delsh</a></p><div class="image"></div></div><div class="container"><footer><p class="text-muted">@ Bruker Corporation 2023</p></footer></div></div><div class="schema-navbar" id="navbar" role="navigation"><button class="schema-navbar-toggle visible-sm visible-xs" id="sidebar-toggle"><span class="schema-glyph schema-glyph-menu"></span></button><a class="schema-navbar-brand" href="index.html"><img class="schema-navbar-logo" src="../assets/img/logo_white.svg" /></a><button class="btn btn-default dropdown-toggle schema-navbar-toggle mobile-hidden-xs mobile-hidden-sm" style="margin-top:20px;" id="language-toggle" type="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span class="schema-glyph schema-glyph-more_vert" style="top:0;"></span></button><ul class="dropdown-menu" id="language-dropdown"><li class="dropdown-header hidden-md hidden-lg"></li><li class="hidden-md hidden-lg"><a href="index.html">Home</a></li><li class="dropdown-header">Language</li><li class="langMenuItem checked" data-value="en-US"><a href="../en-US/824847243.html">us-english</a></li></ul><div id="navbar-search"><form class="schema-navbar-search hidden-xs pull-right" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div><ul class="navbar-structure-pages hidden-sm hidden-xs "><li class="schema-home-text"><a href="index.html">Home</a></li></ul><button class="navbar-toggle schema-navbar-toggle visible-xs" data-toggle="collapse" data-target="#search-collapse"><span class="schema-glyph schema-glyph-search"></span></button><form class="collapse hidden-sm hidden-md hidden-lg" id="search-collapse" role="search" action="search.html"><input type="text" name="q" autocomplete="search2662718347" placeholder="Search" results="10" /></form></div></div></div><script type="text/javascript" charset="utf-8" src="js/treedata.json"></script><script src="../assets/js/00-jquery.min.js"></script><script src="../assets/js/01-bootstrap.min.js"></script><script src="../assets/js/02-modernizr.custom.js"></script><script src="../assets/js/03-jquery-tree.js"></script><script src="../assets/js/04-jquery.mmenu.oncanvas.min.js"></script><script src="../assets/js/05-jquery.mcustomscrollbar.min.js"></script><script src="../assets/js/06-jquery-scrollbars.min.js"></script><script src="../assets/js/18-schema-common-core.min.js"></script><script src="../assets/js/19-schema-common-search.js"></script><script src="../assets/js/20-bootstrap-schema.js"></script></body></html>